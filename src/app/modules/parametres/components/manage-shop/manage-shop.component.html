<section class="manage-section">
    <div class="container">
        <div class="row">
            <div class="col col-3">
                <app-manage-aside activePath="manage-shop"></app-manage-aside>
            </div>
            <div class="col col-9">
                <main class="h-100 p-3">
                    <h1>Gérer ma boutique</h1>
                        <div class="row mt-3 g-3">
                            <div class="col col-12">
                                <div class="row">
                                    <div class="col col-5">
                                        <mat-card class="h-100">
                                            <mat-card-content>
                                                <mat-card-title>
                                                    <i class="fa-solid fa-1 step-number"></i>
                                                    <span>Logo de votre entreprise</span> 
                                                </mat-card-title>
                                                <div class="mb-4">
                                                    <div class="mx-auto mt-4" style="max-width: 220px;">
                                                        <file-pond #myPond *ngIf="isPondActive"
                                                            [options]="pondOptions" 
                                                            [files]="pondFiles">
                                                        </file-pond>
                                                    </div>
                                                    <div class="d-flex justify-content-center" *ngIf="this.shop.shopLogoImage">
                                                        <button class="btn btn-outline-danger" (click)="removeLogo()">
                                                            Supprimer la photo
                                                        </button>
                                                    </div>
                                                    <p class="advise text-center mt-4">
                                                        - Taille d'image conseillée: 200x200px.<br>
                                                        - Taille maximale: 5mb.
                                                    </p>
                                                </div>
                                            </mat-card-content>
                                        </mat-card>
                                    </div>
                                    <div class="col col-7">
                                        <mat-card class="h-100">
                                            <mat-card-content>
                                                <mat-card-title>
                                                    <i class="fa-solid fa-2 step-number"></i>
                                                    <span>Détails de l'entreprise</span> 
                                                </mat-card-title>
                                                <mat-form-field class="w-100 mb-3" appearance="outline">
                                                    <mat-label>Nom de l'entreprise</mat-label>
                                                    <input matInput [formControl]="corpNameControl">
                                                    <mat-hint align="end">URL: https://akawor.com/boutiques/{{corpNameUrl|lowercase}}</mat-hint>
                                                </mat-form-field>
                                                <mat-form-field class="w-100 mb-3" appearance="outline">
                                                    <mat-label>Catégorie de l'entreprise</mat-label>
                                                    <mat-select [formControl]="categoryControl" name="category">
                                                        <mat-option *ngFor="let element of shopCatgories" [value]="element.categoryLibelle">
                                                        {{element.categoryLibelle}}
                                                        </mat-option>
                                                    </mat-select>
                                                    <mat-hint align="end">Catégorie</mat-hint>
                                                </mat-form-field>
                                                <mat-form-field class="w-100" appearance="outline">
                                                    <mat-label>Description de la boutique</mat-label>
                                                    <textarea matInput rows="4" [formControl]="descriptionControl"></textarea>
                                                    <mat-hint align="end">Ceci est juste un modèle ! Vous êtes libre de le modifier.</mat-hint>
                                                </mat-form-field>
                                            </mat-card-content>
                                        </mat-card>
                                    </div>
                                </div>
                            </div>
                            <div class="col col-6">
                                <mat-card class="h-100">
                                    <mat-card-content>
                                        <mat-card-title>
                                            <i class="fa-solid fa-3 step-number"></i>
                                            <span>Contacts</span>
                                        </mat-card-title>
                                        <h3 class="form-label">Vos clients pourrons vous contacter.</h3>
                                        <div class="mb-4">
                                            <mat-form-field appearance="outline" class="w-100 mb-3">
                                                <mat-label>Adresse e-mail</mat-label>
                                                <input matInput type="email" [formControl]="shopEmailControl">
                                                <mat-icon matSuffix>alternate_email</mat-icon>
                                                <mat-hint align="end">E-mail</mat-hint>
                                            </mat-form-field>
                                            <mat-form-field appearance="outline" class="w-100 mb-3">
                                                <mat-label>Numéro de téléphone</mat-label>
                                                <input matInput [formControl]="phoneControl">
                                                <mat-icon matSuffix>phone</mat-icon>
                                                <mat-hint align="end">Téléphone</mat-hint>
                                            </mat-form-field>
                                            <mat-form-field appearance="outline" class="w-100 mb-3">
                                                <mat-label>Site internet de l'entreprise</mat-label>
                                                <input matInput placeholder="https://mon-entreprise.com" [formControl]="websiteControl">
                                                <mat-icon matSuffix>language</mat-icon>
                                                <mat-hint align="end">{{websiteControl.valid ? 'Lien valide' : 'Lien invalide'}}</mat-hint>
                                            </mat-form-field>
                                            <mat-form-field appearance="outline" class="w-100 mb-3">
                                                <mat-label>Horaires d'ouvertures</mat-label>
                                                <input matInput [formControl]="workingHoursControl">
                                                <mat-icon matSuffix>calendar_month</mat-icon>
                                                <mat-hint align="end">Horaires</mat-hint>
                                            </mat-form-field>
                                        </div>
                                    </mat-card-content>
                                </mat-card>
                            </div>
                            <div class="col col-6">
                                <mat-card class="h-100">
                                    <mat-card-content>
                                        <mat-card-title>
                                            <i class="fa-solid fa-4 step-number"></i>
                                            <span>Réseaux sociaux</span>
                                        </mat-card-title>
                                        <h3 class="form-label">Mettez les liens qui rédirigent vers vos réseaux sociaux.</h3>
                                        <div class="mb-4">
                                            <mat-form-field appearance="outline" class="w-100 mb-3">
                                                <mat-label>Lien vers votre compte Instagram</mat-label>
                                                <input matInput placeholder="Placeholder" [formControl]="instagramControl">
                                                <i class="fa-brands fa-instagram fa-lg" style="margin-right: 10px;" matSuffix></i>
                                                <mat-hint align="end">{{instagramControl.valid ? 'Lien valide' : 'Lien invalide'}}</mat-hint>
                                            </mat-form-field>
                                            <mat-form-field appearance="outline" class="w-100 mb-3">
                                                <mat-label>Lien vers votre compte Facebook</mat-label>
                                                <input matInput placeholder="Placeholder" [formControl]="facebookControl">
                                                <i class="fa-brands fa-facebook-f fa-lg" style="margin-right: 15px;" matSuffix></i>
                                                <mat-hint align="end">{{facebookControl.valid ? 'Lien valide' : 'Lien invalide'}}</mat-hint>
                                            </mat-form-field>
                                            <mat-form-field appearance="outline" class="w-100">
                                                <mat-label>Lien vers votre compte Tiktok</mat-label>
                                                <input matInput placeholder="Placeholder" [formControl]="tiktokControl">
                                                <i class="fa-brands fa-tiktok fa-lg" style="margin-right: 10px;" matSuffix></i>
                                                <mat-hint align="end">{{tiktokControl.valid ? 'Lien valide' : 'Lien invalide'}}</mat-hint>
                                            </mat-form-field>
                                        </div>
                                        <p class="text-end advise m-0 p-0">- Laissez les champs vides pour les désactiver.</p>
                                    </mat-card-content>
                                </mat-card>
                            </div>
                            <div class="col col-12">
                                <mat-card class="mt-3">
                                    <mat-card-content>
                                        <mat-card-title>
                                            <i class="fa-solid fa-5 step-number"></i>
                                            <span>Détails de l'adresse</span>
                                        </mat-card-title>
                                        <div class="d-flex align-items-center">
                                            <h3 class="form-label">Dites-nous ou se trouve votre entreprise.</h3>
                                            <div class="mx-3 mb-3">
                                                <button (click)="getUserPosition()" class="btn get-location-btn"
                                                [ngClass]="{'disabled': isGettingPosition }" [hidden]="userPosition.lat!=='0' && userPosition.long!=='0'">
                                                    <i class="fa-solid fa-map-location"></i>
                                                    <span>J'utilise ma position</span>
                                                </button>
                                                <button (click)="removeUserPosition()" class="btn btn-danger rm-location-btn" [hidden]="userPosition.lat=='0' && userPosition.long=='0'">
                                                    <i class="fa-solid fa-trash"></i>
                                                    <span>Supprimer position</span>
                                                </button>
                                            </div>
                                            <div class="spinner-grow text-success" role="status" style="margin-top: -15px;" *ngIf="isGettingPosition">
                                                <span class="visually-hidden">Loading...</span>
                                            </div>
                                        </div>
                                        <div *ngIf="userPosition.lat !== '0' && userPosition.long !== '0'" class="mb-3">
                                            <iframe *ngIf="url" [src]="url" height="100%" style="border:0;width: 100%;" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
                                        </div>
                                        <mat-form-field appearance="outline" class="w-100">
                                            <mat-label>Adresse de l'entreprise</mat-label>
                                            <input matInput [formControl]="addressControl">
                                            <mat-icon matSuffix>location_on</mat-icon>
                                            <mat-hint align="end">Adresse</mat-hint>
                                        </mat-form-field>
                                    </mat-card-content>
                                </mat-card>
                                <div class="d-flex align-items-center mt-3">
                                    <button class="btn btn-dark"
                                        [ngClass]="{'disabled': 
                                        isUpdating || corpNameControl.invalid ||
                                        descriptionControl.invalid ||shopEmailControl.invalid ||
                                        phoneControl.invalid || websiteControl.invalid || 
                                        instagramControl.invalid || facebookControl.invalid ||
                                        tiktokControl.invalid || addressControl.invalid
                                        }"
                                        (click)="saveShopChanges()">
                                        Enregister les modifications
                                    </button>
                                    <div class="spinner-grow text-success mx-3" *ngIf="isUpdating" role="status">
                                        <span class="visually-hidden">Loading...</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                </main>
            </div>
        </div>
    </div>
</section>